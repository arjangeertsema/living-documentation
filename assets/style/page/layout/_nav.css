/* Layout: Nav */
.menu {
    color: var(--menu-text-color);
    display: grid;
    grid-template-rows: auto auto 1fr auto;
    grid-template-areas: "logo" "branch" "main" "footer";
    inset-block: var(--main-margin) 0;
    inset-inline-start: 0;
    overflow: auto;
    position: fixed;
    width: var(--nav-width);
}

.menu > :where( div) {
    max-width: var(--nav-width);
    padding: var(--space-sm);
}

.menu a {
    color: currentcolor;
    text-decoration: none;
}

.menu .active > a,
.menu .active > .menu-toggle {
    text-decoration: underline;
    text-decoration-color: var(--color-white-a50);
}

.menu :focus-visible {
    box-shadow: 0 0 0 var(--line-thin) var(--color-black-a20); 
}

.menu a:hover,
.menu a:focus-visible {
    text-decoration: underline;
}

.menu .icon {
    vertical-align: middle;
}

.menu .icon + .label {
    direction: rtl;
    margin-inline-start: var(--space-xs);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.menu svg {
    fill: currentcolor;
}

.menu input {
    background-color: var(--color-white-a20);
}


/* Logo menu */
.menu-logo {
    padding-block: var(--space-lg);
    padding-inline-end: var(--space-xl);
}

.menu-logo img {
    block-size: auto;
    max-height: var(--logo-height);
    max-width: 100%;
}

/* Branch menu  */
.menu-branch {
    background-color: var(--color-black-a10);
    padding: 0;
}

/* Branches menu  */
.menu-branches {
    background: var(--color-black-a10);
    flex-direction: column;
    gap: var(--space-sm);
    grid-area: main;
    padding-block-start: 0;
}

.menu-branches:where(:not([hidden])) {
    display: flex;
}

.menu-branches:where(:not([hidden])) ~ div {
    display: none;
}

.menu-branches mark {
    background-color: transparent;
    color: currentcolor;
    font-style: italic;
}

.menu-branches ul {
    list-style: none;
    padding-inline-start: 0;
}

.menu-branches ul li:not([hidden]) + li {
    border-block-start: var(--line-base) solid var(--color-white-a20);
}

.menu-branches a {
    display: inline-flex;
    flex-wrap: wrap;
    padding-block: var(--space-xs);
}

/* Main menu */
.menu-main {
    grid-area: main;
}

.menu-main > ul {
    list-style: none;
    padding-inline-start: 0;
}

.menu-main > ul > li + li {
    border-block-start: var(--line-base) solid var(--color-white-a20);
}

.menu-main .menu-toggle {
    cursor: s-resize;
}

.menu-main .menu-toggle[aria-expanded="true"] {
    cursor: n-resize;
}

.menu-main > ul > li > a,
.menu-main > ul > li > .menu-toggle {
    display: inline-block;
    padding-block: var(--space-xs);
}

.menu-main > ul > li li {
    padding-block: var(--space-xxs);
}

.menu-main a:hover,
.menu-main a:focus,
.menu-main .menu-toggle:hover,
.menu-main .menu-toggle:focus {
    text-decoration: underline;
}

/* Menu footer */
.menu-footer ul {
    display: flex;
    list-style: none;
    padding-left: 0;
    gap: var(--space-sm);
}


/* Menu toggle */
.menu-toggle-branches {
    align-items: center;
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: auto 1fr auto;
    padding: var(--space-sm);
    white-space: nowrap;
}

.menu-toggle-branches .icon svg {
    vertical-align: middle;
}

.menu-toggle-branches::after {
    block-size: var(--space-xs);
    border-color: currentcolor;
    border-style: solid;
    border-width: 0 0 var(--line-thin) var(--line-thin);
    content: "";
    display: inline-block;
    inline-size: var(--space-xs);
    inset-inline-start: calc(var(--space-xxs) / -2);
    justify-self: end;
    position: relative;
    transform: rotate(-45deg);
    transform-origin: 30% 70%;
    transition: transform var(--duration-base);
}

.menu-toggle-branches[aria-expanded="true"]::after {
    transform: rotate(135deg);
}
