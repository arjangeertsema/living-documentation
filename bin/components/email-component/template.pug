doctype html
html
  head
    meta(charset='UTF-8')
    title=data.title
    
    link(rel='stylesheet' type='text/css' href=data.root + 'assets/style/email/style.css')

    if(data.googleFont)
      link(rel='preconnect' href='https://fonts.googleapis.com')
      link(rel='preconnect' href='https://fonts.gstatic.com' crossorigin)
      link(href=data.googleFont rel='stylesheet')
  body
    if(data.themes)
      select
        each theme in data.themes 
          option=theme
          
    section(class='mail')
      header(class='mail-header')
        dl 
          dt=data.locale.from
          dd. 
            !{data.from.email}
          dt=data.locale.to
          dd.
            !{data.to.email}
          dt=data.locale.subject
          dd=data.subject

      article
        header
          figure
            img(src=data.root + 'assets/images/message/logo.svg')

        main
          | !{data.message}

        footer
          div(class='contact')
            | !{data.footer}

        if data.attachments
          attachments
            h3=data.locale.attachments
            ul
              each attachment in data.attachments
                li=attachment.name

    script.
      (() => {
        const calculateHeight = () => {
          const body = document.body, html = document.documentElement;

          return Math.max(
            body.scrollHeight,
            body.offsetHeight,
            html.clientHeight,
            html.scrollHeight,
            html.offsetHeight);
        };

        //Polyfill disturbes the iframe resizer, calculate height manually.      
        window.iFrameResizer = {
          heightCalculationMethod: () => { return calculateHeight(); }
        };
      })();
    
    script(src=data.root + 'assets/iframe-resizer-dist/iframeResizer.contentWindow.min.js' charset='UTF-8')
